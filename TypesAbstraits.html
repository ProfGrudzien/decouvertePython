<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="style.css"/>
    </head>
    <body>
        <div class="main">
            <h1>Types abstraits</h1>
            <h2>Les types abstraits</h2>
            <p>
                Les langages de programmation utilisent quelques types primitifs :
                <ul>
                    <li>les nombres entiers</li>
                    <li>les nombres flottants</li>
                    <li>les bool√©ens</li>
                    <li>les cha√Ænes de caract√®res</li>
                </ul>
                Les autres types (tuples, listes, dictionnaires, ...) sont des types plus √©labor√©s.
            </p>
            <p>
                Selon les situations, on a besoin de ces types √©labor√©s. Leur impl√©mentation peut √™tre pr√©vu ou non dans le langage de programmation utilis√©. Si ce n'est pas le cas, on peut programmer un moyen pour les utiliser. L'utilisation ne d√©pend donc pas de la fa√ßon dont ils sont impl√©ment√©s du moment que ces impl√©mentations proposent tous les outils n√©cessaire au non fonctionnement de ces types √©labor√©s. On parle alors de types abstraits.
            </p>
            <p>
                Cette ann√©e, nous √©tudierons 4 familles de types abstraits :
                <ul>
                    <li>les structures lin√©aires : les piles, les files, les listes</li>
                    <li>les structures √† acc√®s par cl√© : les dictionnaires</li>
                    <li>les structures hi√©rarchiques : les arbres</li>
                    <li>les structures relationnelles : les graphes</li>
                </ul>
            </p>
            <h2>Les piles</h2>
            <p>
                Lorsque nous avons √©tudi√© les fonctions r√©cursives nous avons parl√© de pile d'ex√©cution.<br/>
                Il est donc maintenant temps de d√©finir plus en d√©tail la notion de pile.
            </p>
            <h3>Les besoins</h3>
            <p>
                Nous avons besoin d'une structure stockant les appels de la fonction r√©cursive en attente de r√©sultat.
                De part la r√©cursivit√©, le r√©sultat de la fonction ajout√©e en dernier √† la pile permet de trouver le r√©sultat de la pr√©c√©dente.
                Dans une structure en pile, on a donc besoin d'acc√©der au dernier √©l√©ment stock√©. Le nom a √©t√© choisit car il fait le parall√®les avec une pile d'assiettes par exemple (en supposant qu'on ne puisse prendre les assiettes qu'une par une).
                Bien entendu, une liste (au sens de python) peut convenir pour repr√©senter une pile d'appels r√©cursif, mais le type liste de python permet beaucoup plus de choses que ce dont on a besoin. Voici les seuls outils n√©cessaires :
                <ul>
                    <li>cr√©er une pile vide</li>
                    <li>d√©terminer si une pile est vide</li>
                    <li>empiler une valeur √† la pile (l'ajouter en haut de pile)</li>
                    <li>d√©piler une valeur √† la pile (lire puis retirer la valeur en haut de pile)</li>
                </ul>
                En anglais, on parle de <mark>stack</mark> ou de structure <mark>LIFO</mark> : "Last In = First Out" c'est-√†-dire ¬´ dernier entr√© = premier sorti ¬ª.
            </p>
            <div class="exercice">
                D√©crire le contenu des variables <mark class="code">P</mark> et <mark class="code">v</mark> √† la fin de ces instructions :
                <ol>
                    <li>P = nouvelle pile vide</li>
                    <li>empiler 3 √† P</li>
                    <li>empiler 2 √† P</li>
                    <li>v = d√©piler P</li>
                    <li>empiler 5 √† P</li>
                    <li>empiler 7 √† P</li>
                    <li>empiler 9 √† P</li>
                </ol>
            </div>
            <p>
                L'exercice pr√©c√©dent montre bien qu'il n'est pas n√©cessaire de conna√Ætre la fa√ßon dont est impl√©ment√© la pile pour pouvoir l'utiliser. Seul compte la syntaxe pour appeler les diff√©rents outils. Pour la suite, nous utiliserons la syntaxe de la Programmation Orient√© Objet : <mark class="code">P = Pile()</mark> ; <mark class="code">P.est_vide()</mark> ; <mark class="code">P.empiler(valeur)</mark> ; <mark class="code">P.depiler()</mark>
            </p>
            <h3>Impl√©mentation</h3>
            <div class="exercice">
                A l'aide du type <mark class="code">list</mark> de Python, proposer l'impl√©mentation d'un objet mod√©lisant une pile.
            </div>
            <div class="exercice">
                On peut aussi utiliser le principe de la r√©cursivit√©.<br/>
                Une pile non vide peut √™tre vue comme un couple : la valeur au sommet et une autre pile contenant toutes les autres valeurs.<br/>
                Proposer une impl√©mentation d'un objet mod√©lisant une pile sans utiliser le type <mark class="code">list</mark> de Python.
            </div>
            <h3>Applications</h3>
            Pour tous les exercices suivants, vous importerez une des deux impl√©mentations d'une pile.
            <div class="exercice">
                Ecrire une fonction <mark class="code">min_pile(P)</mark> qui retourne la plus petite valeur contenue dans la pile <mark class="code">P</mark>.<br/>
                Attention, √† la fin de cette fonction, la pile <mark class="code">P</mark> doit avoir retrouv√© son √©tat initial.<br/>
                Pour cela, on peut utiliser une seconde pile <mark class="code">Q</mark>.
            </div>
            <div class="exercice">
                Ecrire une fonction <mark class="code">copie_pile(P)</mark> qui retourne une copie de la pile <mark class="code">P</mark>, c'est-√†-dire une pile contenant les m√™mes valeurs que la pile <mark class="code">P</mark>.<br/>
                Attention, √† la fin de cette fonction, la pile <mark class="code">P</mark> doit avoir retrouv√© son √©tat initial.
            </div>
            <div class="exercice">
                Lorsque l'on tape une expression math√©matique dans des logiciels adapt√©s, un premier contr√¥le de la syntaxe est r√©alis√© sur les parenth√®ses et les crochets : 
                <ul>
                    <li>on ne peut pas fermer une parenth√®ses ou un crochet s'il ne correspond pas √† une parenth√®ses ou un crochet ouvert.</li>
                    <li>dans l'expression math√©matique, il doit y avoir autant de parenth√®ses ouvrantes que de parenth√®ses fermantes.</li>
                    <li>dans l'expression math√©matique, il doit y avoir autant de crochets ouvrants que de crochets fermants.</li>
                </ul>
                Un moyen tr√®s simple de v√©rifier ce point de syntaxe est d'utiliser une pile.<br/>
                On parcourt les caract√®res de l'expression une par une puis :
                <ul>
                    <li>S'il s'ag√Æt d'une parenth√®se ouvrante ou d'un crochet ouvrant, on l'empile.</li>
                    <li>S'il s'ag√Æt d'une parenth√®se fermante ou d'un crochet fermant, on v√©rifie qu'il co√Øncide avec la valeur d√©pil√©e.</li>
                    <li>Sinon on ne fait rien</li>  
                </ul>
                Ecrire une fonction <mark class="code">controle_syntaxe(expression)</mark> qui v√©rifie l'<mark class="code">expression</mark>.
            </div>
            <div class="exercice">
                On souhaite enregistrer l'historique de navigation utilisable gr√¢ce aux boutons "pr√©c√©dent" ou "suivant" du navigateur dans des piles.
                <ol>
                    <li>Pourquoi une pile semble tout indiqu√©e pour stocker les url des pages pr√©c√©demment visit√©e ?</li>
                    <li>Lorsque l'on utilise le bouton "pr√©c√©dent", comment stocker les url que l'on devra retrouver en utilisant "suivant" ?</li>
                    <li>Ecrire un objet <mark class="code">historique</mark> contenant les m√©thodes suivantes :
                        <mark class="code">visiter_site(url)</mark>, <mark class="code">page_actuelle()</mark>, <mark class="code">page_precedente()</mark>, <mark class="code">page_suivante()</mark><br/>
                        Vous choisirez vous m√™me les attributs que vous utiliserez.
                    </li>
                </ol>
            </div>
            <h2>Les files</h2>
            <h3>Les besoins</h3>
            <p>
                Nous avons √©tudier une structure permettant de traiter des √©l√©ments dans leur ordre d'arriv√©e.
                Dans une structure de file, on a acc√®de au premier √©l√©ment stock√©. Le nom a √©t√© choisit car il fait le parall√®les avec une file d'attente (√† une caisse d'un magasin par exemple.).
                Voici les seuls outils n√©cessaires :
                <ul>
                    <li>cr√©er une file vide</li>
                    <li>d√©terminer si une file est vide</li>
                    <li>enfiler une valeur √† la file (l'ajouter en fin de file)</li>
                    <li>d√©filer une valeur √† la file (lire puis retirer la valeur en d√©but de file)</li>
                </ul>
                En anglais, on parle de <mark>queue</mark> ou de structure <mark>FIFO</mark> : "First In = First Out" c'est-√†-dire ¬´ premier entr√© = premier sorti ¬ª.
            </p>
            <div class="exercice">
                D√©crire le contenu des variables <mark class="code">F</mark> et <mark class="code">v</mark> √† la fin de ces instructions :
                <ol>
                    <li>F = nouvelle file vide</li>
                    <li>enfiler 3 √† F</li>
                    <li>enfiler 2 √† F</li>
                    <li>v = d√©filer F</li>
                    <li>enfiler 5 √† F</li>
                    <li>enfiler 7 √† F</li>
                    <li>enfiler 9 √† F</li>
                </ol>
            </div>
            <h3>Impl√©mentation</h3>
            <div class="exercice">
                A l'aide du type <mark class="code">list</mark> de Python, proposer l'impl√©mentation d'un objet mod√©lisant une file.
                Il faut impl√©menter les m√©thodes : <mark class="code">est_vide()</mark> ; <mark class="code">enfiler(valeur)</mark> et <mark class="code">defiler()</mark>.
            </div>
            <div class="exercice">
                On peut aussi utiliser deux piles pour construire une file.
                L'une des deux piles permet de stocker les √©l√©ments que l'on enfile, la seconde √† stocker les √©l√©ments que l'on va d√©filer.
                Appelons ces deux piles <mark class="code">E</mark> (comme entr√©e) et <mark class="code">S</mark> (comme sortie).
                <ol>
                    <li>Dans quelle pile empile-t-on la valeur que l'on souhaite empiler ?</li>
                    <li>
                        On souhaite d√©filer une valeur.
                        <ol>Peut on d√©piler la pile <mark class="code">E</mark> ?</ol>
                        <ol>Dans quelle pile doit-on d√©piler ?</ol>
                        <ol>Si cette pile est vide, que faire ?</ol>
                    </li>
                    <li>
                        V√©rifier que cette structure respecte le comportement d'une file en dessinant les deux piles √† chaque √©tape suivante :
                        <ul>
                            <li>Cr√©er une file vide F</li>
                            <li>Enfiler la valeur 1</li>
                            <li>Enfiler la valeur 2</li>
                            <li>D√©filer une valeur</li>
                            <li>Enfiler la valeur 3</li>
                            <li>D√©filer une valeur</li>
                            <li>D√©filer une valeur (encore)</li>
                        </ul>
                    </li>
                    <li>
                        Impl√©menter en Python une classe <mark class="code">File</mark> construite sur deux piles.
                    </li>
                </ol>
            </div>
            <h3>Applications</h3>
            Pour tous les exercices suivants, vous importerez une des deux impl√©mentations d'une file.
            <div class="exercice">
                Ecrire une fonction <mark class="code">min_file(F)</mark> qui retourne la plus petite valeur contenue dans la file <mark class="code">F</mark>.<br/>
                Attention, √† la fin de cette fonction, la file <mark class="code">F</mark> doit avoir retrouv√© son √©tat initial.
            </div>
            <div class="exercice">
                Ecrire une fonction <mark class="code">copie_file(F)</mark> qui retourne une copie de la file <mark class="code">F</mark>, c'est-√†-dire une file contenant les m√™mes valeurs que la file <mark class="code">F</mark>.<br/>
                Attention, √† la fin de cette fonction, la pile <mark class="code">F</mark> doit avoir retrouv√© son √©tat initial.
            </div>
            <div class="exercice">
                <p>
                    Le directeur d'une grande surface nous demande d'√©tablir un moyen de pr√©voir le nombre de caisse √† ouvrir en fonction du nombre de client entrant dans le magasin. Ainsi, l'influence habituelle du magasin permet de construire les planning d'ouverture de caisses.
                </p>
                <p>
                    Nous allons r√©aliser des simulations al√©atoires pour proposer une solution au directeur.
                </p>
                <p>
                    On suppose qu'une √©tude pr√©alable permet de mod√©liser le temps pass√© par les clients dans le magasin ainsi que les temps de passage en caisse (hors temps d'attente). Les fonctions suivantes √† copier-coller repr√©sentent ces deux situations.
                </p>
                <div class="algo">
                    <input type="button" class="copier" value="üìë" title="copier">
                    <p class="code">
                        from random import gauss<br/>
                        def temps_en_rayon() :<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;''' Simule le temps pass√© dans les rayons par un client √† l'aide d'une loi normale :<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ de moyenne 48 minutes<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ d'√©cart-type 15 minutes<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrondi √† l'unit√© et tronqu√© pour que le r√©sultat soit compris entre 1 et 120 minutes<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;'''<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;temps = int(gauss(48, 18))<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;if temps &lt; 1 :<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temps = 1<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;if temps &gt; 120 :<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temps = 120<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;return temps<br/><br/>
                        def temps_en_caisse() :<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;''' Simule le temps pass√© √† la caisse, sans compter le temps d'attente √† l'aide d'une loi normale :<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ de moyenne 8 minutes<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ d'√©cart-type 2 minutes<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrondi √† l'unit√© et tronqu√© pour que le r√©sultat soit compris entre 1 et 20 minutes<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;'''<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;temps = int(gauss(8, 2))<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;if temps &lt; 1 :<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temps = 1<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;if temps &gt; 20 :<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temps = 20<br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;return temps<br/><br/>
                    </p>
                </div>
                <p>
                    Toutes les heures seront repr√©sent√©es par un nombre entier : le nombre de minutes depuis 0h00.
                </p>
                <ol>
                    <li>
                        Ecrire une classe <mark class="code">Client</mark> permettant de mod√©liser un des clients du magasin.
                        Cette classe dispose des attributs et m√©thodes suivants :
                        <ul>
                            <li><mark class="code">heure_arrivee</mark> : l'heure d'arriv√©e</li>
                            <li><mark class="code">temps_en_rayon</mark> : le temps que le client passera en rayon</li>
                            <li><mark class="code">temps_restant_en_rayon</mark> : le temps qu'il reste au client en rayon</li>
                            <li><mark class="code">temps_attente_en_caisse</mark> : le temps que le client a pass√© en caisse avant d'√™tre encaiss√©, <mark class="code">0</mark> si le client est encore en rayon.</li>
                        </ul>
                    </li>
                    <li>
                        Ecrire une classe <mark class="code">Caisse</mark> permettant de mod√©liser une des caisses du magasin.
                        Cette classe dispose des attributs et m√©thodes suivants :
                        <ul>
                            <li><mark class="code">heure_ouverture</mark> : heure d'ouverture de la caisse</li>
                            <li><mark class="code">heure_fermeture</mark> : heure fermeture de la caisse</li>
                            <li><mark class="code">est_ouverte(h)</mark> : retourne <mark class="code">True</mark> si la caisse est ouverte √† l'heure <mark class="code">h</mark>, <mark class="code">False</mark> sinon.</li>
                            <li><mark class="code">file_clients</mark> : une file contenant les clients qui attendent</li>
                            <li><mark class="code">nb_file_clients</mark> : le nombre de clients qui attendent</li>
                            <li><mark class="code">client_en_cours</mark> : le client qui se fait encaisser, <mark class="code">None</mark> s'il n'y a pas de clients</li>
                            <li><mark class="code">duree_restante_encaissement</mark> : la dur√©e restante pour finir d'encaisser le client</li>
                            <li><mark class="code">est_libre()</mark> : retourne <mark class="code">True</mark> s'il n'y a pas de clients √† encaisser, <mark class="code">False</mark> sinon.</li>
                            <li><mark class="code">temps_sans_client</mark> : le nombre de minutes o√π la caisse est libre (c'est-√†-dire sans client).</li>
                            <li><mark class="code">temps_activite</mark> : le nombre de minutes o√π un client est en cours d'encaissement.</li>
                        </ul>
                        Le constructeur de cette classe doit permettre de choisir facilement l'heure d'ouverture et l'heure de fermeture de la caisse.
                    </li>
                    <li>
                        Ecrire une classe <mark class="code">Magasin</mark> permettant de mod√©liser le magasin.
                        Cette classe dispose des attributs et m√©thodes suivants :
                        <ul>
                            <li><mark class="code">clients_sortis</mark> : la liste de tous les clients qui ont √©t√© encaiss√©s</li>
                            <li><mark class="code">clients_en_magasin</mark> : la liste de tous les clients sont encore dans le magasin</li>
                            <li><mark class="code">caisses</mark> : la liste de toutes les caisses du magasin</li>
                        </ul>
                    </li>
                    <li>
                        Ajouter √† la classe <mark class="code">Magasin</mark> la m√©thode suivante qui donne le nombre de clients qui entrent dans le magasin √† un instant donn√©.
                        <div class="algo">
                            <input type="button" class="copier" value="üìë" title="copier">
                            <p class="code">
                                def influence(self, h) :<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;if h < 8*60 :<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;if h > 20*60-20 :<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;I = [8, 15, 20, 22, 20, 14, 11, 13, 19, 22, 17, 8, 0]<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;i = (h - 8*60) // 60<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;m = (h - 8*60) % 60<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;return (I[i]*(60-m) + I[i+1]*m)//60
                            </p>
                        </div>
                    </li>
                    <li>
                        Cr√©er une instance d'un magasin en choisissant vous m√™me le nombre de caisses et leurs horaires d'ouverture et de fermeture.
                    </li>
                    <li>
                        Ecrire une fonction <mark class="code">Simulation</mark> permettant de simuler une journ√©e dans ce magasin.
                        Cette fonction simule la journ√©e minute par minute :
                        <ul>
                            <li>l'encaissement des clients progresse de 1 minute pour chaque caisse. Si l'encaissement est fini, le client sort du magasin et un nouveau encaissement se pr√©pare</li>
                            <li>les clients dans les files d'attente des caisses gagnent 1 minute sur leur temps d'attente en caisse</li>
                            <li>les clients en rayon perdent 1 minute sur leur temps restant en rayon. Si ce temps passe √† 0, le client se dirige vers une caisse ouverte et libre si possible, ou sinon vers la caisse ouverte avec le moins de client dans la file.</li>
                            <li>de nouveaux client entre √©ventuellement dans le magasin.</li>
                            <li>si une des caisses √† plus de 3 personnes dans sa file d'attente, afficher l'heure qu'il est.</li>
                        </ul>
                        Une fois la journ√©e termin√©e :
                        <ul>
                            <li>calculer et afficher le temps moyen d'attente en caisse.</li>
                            <li>pour chaque caisse, afficher le temps pass√© sans client et son temps d'activit√©.</li>
                        </ul>
                    </li>
                    <li>
                        Changez le nombre de caisses et leur horaires pour proposer la solution qui vous parait optimale.
                    </li>
                </ol>
            </div>
        </div>
        <script type="text/javascript" src="script.js"></script>
    </body>
</html>

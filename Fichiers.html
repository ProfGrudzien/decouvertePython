<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="style.css"/>
    </head>
    <body>
        <div class="main">
            <h1>Manipuler des fichiers</h1>
            <h2>Ouverture d'un fichier en lecture</h2>
            <p>Un fichier peut permettre de stocker des informations. Il est alors n√©cessaire de pouvoir l'ouvrir dans un programme python pour acc√©der aux donn√©es. En informatique, plusieurs programmes peuvent avoir √† acc√©der √† un m√™me fichier. Il est donc tr√®s important de veiller √† ce que chaque programme referme un fichier d√®s qu'il n'en a plus besoin. La gestion de fichier peut se faire √† l'aide d'instruction <mark class='code'>open</mark> et <mark class='code'>close</mark>. Cependant, si le programme s'arr√™te sur une erreur entre ces deux instructions, le fichier n'est pas proprement referm√©. C'est pourquoi Python int√®gre des outils plus perfectionn√©s pour ouvrir un fichier et pour le refermer automatiquement m√™me en cas d'erreurs lors de l'ex√©cution. Voici un exemple d'un programme ouvrant le fichier <mark class="code">data.txt</mark> et affichant son contenu.</p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    with open("data.txt", "r") as fichier : <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;lignes = fichier.readlines() <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;for ligne in lignes :<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(ligne, end='')<br/>
                </p>
            </div>
            <p>Remarques : la lettre <mark class='code'>r</mark> signifie ouverture en lecture (read en anglais). Les lignes lues dans le fichiers se terminent par le caract√®re "retour √† la ligne". Au moment de l'affichage, il ne faut pas en ajouter un deuxi√®me, il faut donc ajouter <mark class='code'>end=''</mark> dans l'instruction <mark class='code'>print</mark>.</p>
            <div class="exercice">
                <ol>
                    <li>A l'aide d'un √©diteur de texte, cr√©er un fichier <mark class='code'>fruits.txt</mark> en y √©crivant 3 noms de fruits, un par ligne.</li>
                    <li>Ecrire un programme affichant une phrase du type : ¬´ Dans mon panier, il y a des pommes, des cerises et des fraises ¬ª o√π les noms des fruits sont lus √† partir de votre fichier.</li>
                    <li>Modifier les noms des fruits du fichier <mark class='code'>fruits.txt</mark> √† l'aide de l'√©diteur de texte.</li>
                    <li>Ex√©cuter de nouveau le programme et v√©rifiez que la phrase a bien chang√©.</li>
                </ol>
            </div>
            <h2>Ouverture d'un fichier en √©criture</h2>
            <p>Un programme peut aussi avoir besoin de stocker des valeurs dans un fichier. C'est par exemple un moyen de sauvegarder les valeurs des variables pour les r√©cup√©rer plus tard, dans une autre ex√©cution du programme. La syntaxe est similaire √† celle de l'ouverture d'un fichier.</p>
            <h3>Remplacer le contenu d'un fichier.</h3>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    with open("data.txt", "w") as fichier : <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;fichier.write("coucou\n") <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;fichier.write("hibou\n") <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;fichier.write("coucou\n")
                </p>
            </div>
            <p>Remarques : la lettre <mark class='code'>w</mark> signifie ouverture en √©criture (write en anglais). On doit ajouter manuellement les retours √† la ligne en utilisant <mark class='code'>\n</mark>.</p>
            <h3>Compl√©ter le contenu d'un fichier.</h3>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    with open("data.txt", "a") as fichier : <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;fichier.write("coucou\n") <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;fichier.write("hibou\n") <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;fichier.write("coucou\n")
                </p>
            </div>
            <p>Remarque : la lettre <mark class='code'>a</mark> signifie ouverture en √©criture √† la fin du fichier s'il n'est pas vide (add en anglais).</p>
            <div class="exercice">
                On souhaite manipuler le contenu d'un panier de fruits √† l'aide d'un fichier. Ajouter ou retirer un fruit au panier aura un effet direct sur le contenu du fichier.
                <ol>
                    <li>Ecrire une fonction <mark class="code">charger_panier()</mark> qui stocke dans une liste <mark class='code'>liste_fruits</mark> les fruits enregistr√©s dans un fichier <mark class='code'>panier.txt</mark></li>
                    <li>Ecrire une fonction <mark class="code">afficher_panier(liste_fruits)</mark> qui affiche les fruits contenus dans la liste <mark class='code'>liste_fruits</mark>.</li>
                    <li>Ecrire une fonction <mark class="code">ajouter_fruit(liste_fruits, fruit)</mark> qui ajoute le nom <mark class='code'>fruit</mark> √† la liste <mark class='code'>liste_fruits</mark>.</li>
                    <li>Ecrire une fonction <mark class="code">sauvegarder_panier(liste_fruits)</mark> qui √©crit dans le fichier <mark class='code'>panier.txt</mark> le noms des fruits de la liste <mark class='code'>liste_fruits</mark>.</li>
                </ol>
            </div>
            <h2>Quelques m√©thodes utiles sur les cha√Ænes de caract√®res</h2>
            <h3>Couper une liste √† un caract√®re donn√©</h3>
            <p>
                La m√©thode <mark class='code'>split(caractere)</mark> permet de couper une cha√Æne de caract√®res selon le caract√®re donn√©. Exemple :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    texte = "a-b-c-d-e-f" <br/>
                    liste = texte.split("-") <br/>
                    print(liste)
                </p>
            </div>
            <div class="exercice">
                Ecrire une fonction <mark class="code">couper_IP(IP)</mark> qui retourne la liste des 4 nombres apparaissant dans une adresse IP donn√©es sous la forme ¬´ d√©cimale point√©e ¬ª. Par exemple, <mark class="code">couper_IP("192.168.0.1")</mark> retourne la liste <mark class="code">[192, 168, 0, 1]</mark>.
            </div>
            <h3>Transformer une liste en un cha√Æne de caract√®re</h3>
            <p>
                On peut obtenir l'effet inverse √† <mark class='code'>split</mark> en utilisant <mark class='code'>join</mark>. Cette m√©thode rassemble les √©l√©ments d'une liste dans une cha√Æne de caract√®res en les s√©parant par un caract√®re choisi. Exemple :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    liste = ["a", "b", "c", "d"] <br/>
                    texte = "-".join(liste) <br/>
                    print(texte)
                </p>
            </div>
            <p>
                Attention, cette m√©thode prend en param√®tre une liste de <mark>cha√Ænes de caract√®res</mark>.
                Si besoin, il faut faire appel √† la fonction <mark class='code'>str</mark> et aux listes par compr√©hension.
                Exemple :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    liste = [1, 2, 3, 4] <br/>
                    texte = "-".join(<mark>[str(n) for n in liste]</mark>) <br/>
                    print(texte)
                </p>
            </div>
            <div class="exercice">
                Ecrire une fonction <mark class="code">regrouper_IP(IP)</mark> qui retourne la notation d√©cimale point√©e d'une adresse IP √† partir de la liste des 4 nombres apparaissant dans cette adresse IP. Par exemple, <mark class="code">regrouper_IP([192, 168, 0, 1])</mark> retourne la cha√Æne de caract√®res <mark class="code">"192.168.0.1"</mark>.
            </div>
            <div class="exercice">
                Ecrire une fonction <mark class="code">en_binaire_IP(IP)</mark> qui retourne la notation binaire point√©e d'une adresse IP √† partir de la notation d√©cimale point√©e. Par exemple, <mark class="code">en_binaire_IP("192.168.0.1")</mark> retourne la cha√Æne de caract√®res <mark class="code">"11000000.10101000.00000000.00000001"</mark>.<br/>
                On peut utiliser la fonction <mark class="code">bin(n)</mark> qui retourne la repr√©sentation binaire du nombre entier <mark class="code">n</mark>
            </div>
            <h3>Retirer des caract√®res au d√©but ou √† la fin d'une cha√Æne de caract√®re.</h3>
            <p>
                Il est parfois utile de retirer les retours √† la ligne pr√©sents √† la fin d'une cha√Æne de caract√®re.
                La m√©thode <mark class="code">strip()</mark> r√©pond √† ce probl√®me.
            </p>
            <p>
                Sans param√®tre, cette m√©thode retourne la cha√Æne de caract√®res √† laquelle on a retir√© tous les espaces et retours √† la ligne en d√©but ou en fin de cha√Æne. Par exemple <mark class="code">"   a ".strip()</mark> retourne <mark class="code">"a"</mark>.
            </p>
            <p>
                Avec un texte comme param√®tre, cette m√©thode retourne la cha√Æne de caract√®res √† laquelle on a retir√© tous les caract√®res apparaissant dans le texte en d√©but ou en fin de cha√Æne. Par exemple <mark class="code">"acaabbabbaca".strip("ac")</mark> retourne <mark class="code">"bbabb"</mark>.
            </p>
            <div class="exercice">
                Que faut-il donner en param√®tre √† la m√©thode <mark class="code">strip</mark> pour qu'elle retire l'√©ventuel retour √† la ligne √† la fin de la cha√Æne de caract√®res, mais pas les espaces ?
            </div>
            <h2>Le format CSV</h2>
            <p>
                Le format CSV (Coma Separated Value) est un fichier texte contenant des valeurs s√©par√©es par des virgules (ou un autre caract√®re). Il permet de stocker des donn√©es structur√©es sous forme de tableaux. Exemple :
            </p>
            <div class="algo">
                <input type="button" class="copier" value="üìë" title="copier">
                <p class="code">
                    nom;pr√©nom;poste <br/>
                    Lloris;Hugo;gardien <br/>
                    Hernandez;Lucas;d√©fenseur <br/>
                    Kimpembe;Presnel;d√©fenseur
                </p>
            </div>
            <div class="exercice">
                Le fichier <a href="ligue1.csv"><mark class="code">ligue1.csv</mark></a> contient des informations sur les clubs engag√©s en ligue 1 de football pour la saison 2021-2022. Ecrire un programme Python triant les stades de ces clubs selon leurs capacit√©s d√©croissantes.
            </div>
        <script type="text/javascript" src="script.js"></script>
    </body>
</html>
